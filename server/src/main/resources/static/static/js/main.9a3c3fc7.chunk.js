(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,a){e.exports=a.p+"static/media/home_otter_red_background.ed422ee0.png"},51:function(e,t,a){e.exports=a(80)},60:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},77:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(32),i=a(10),o=a.n(i),c=(a(60),a(9)),l=a.n(c),u=a(21),m=a(13),p=a(14),h=a(16),d=a(15),f=a(17),b=(a(63),a(64),a(41)),g=a.n(b),v=a(23),E=a(43),O=function(e){function t(e){return Object(m.a)(this,t),Object(h.a)(this,Object(d.a)(t).call(this,e))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.mode,a=e.src,n=e.height,r=e.width,i=e.style,o=Object(E.a)(e,["mode","src","height","width","style"]),c={fill:"cover",fit:"contain"}[t||"fit"],l={backgroundImage:"url('".concat(a,"')"),backgroundSize:c,backgroundPosition:"center center",backgroundRepeat:"no-repeat",width:r,height:n};return s.a.createElement("div",Object.assign({},o,{style:Object(v.a)({},i,l)}))}}]),t}(n.Component);O.defaultProps=void 0,O.defaultProps={height:60,width:60,mode:"fit"};var j=a(89),w=a(26),S=a(35),k=a(25),y=a(83),C=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("header",{style:{position:"fixed",zIndex:1,width:"100%"}},s.a.createElement(j.a,{className:"navbar"},s.a.createElement(j.a.Group,{align:w.a.LEFT},s.a.createElement(j.a.Heading,null,s.a.createElement("a",{href:"/"},s.a.createElement(O,{src:g.a})))),s.a.createElement(j.a.Group,{align:w.a.RIGHT},s.a.createElement(y.a,{to:"/register"},s.a.createElement(S.b,{className:"bp3-minimal",icon:s.a.createElement(k.a,{icon:"new-person",iconSize:20}),text:"Register"})),s.a.createElement(y.a,{to:"/login"}," ",s.a.createElement(S.b,{className:"bp3-minimal",icon:s.a.createElement(k.a,{icon:"log-in",iconSize:20}),text:"Login"})))))}}]),t}(n.Component),N=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("section",{id:"landing-section"},s.a.createElement(C,null))}}]),t}(n.Component),T=(a(68),a(27)),x=a(8),I=(a(69),a(84)),D=a(18),R=a(85),F=a(86),L=a(91),A=a(44),P=a(24),X=function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onSubmit=function(){var e=Object(u.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.validateForm()){e.next=6;break}return e.next=4,a.submitForm();case 4:n=e.sent,a.setState(Object(v.a)({},a.state,{submitSuccessful:n}));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var n=e.cookies;return a.state={email:"",firstName:"",lastName:"",password:"",submitSuccessful:null,csrfToken:n.get("XSRF-TOKEN")},a.onInputChange=a.onInputChange.bind(Object(x.a)(Object(x.a)(a))),a.onSubmit=a.onSubmit.bind(Object(x.a)(Object(x.a)(a))),a.onToastDismissed=a.onToastDismissed.bind(Object(x.a)(Object(x.a)(a))),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"onInputChange",value:function(e){var t=e.currentTarget;["email","firstName","lastName","password"].includes(t.name)?this.setState(Object(T.a)({},t.name,t.value)):console.log("Can't assign name \"".concat(t.name,'" to form.'))}},{key:"onToastDismissed",value:function(){this.setState(Object(v.a)({},this.state,{submitSuccessful:null}))}},{key:"validateForm",value:function(){return!0}},{key:"submitForm",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/user_api/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":this.state.csrfToken},body:JSON.stringify({email:this.state.email,firstName:this.state.firstName,lastName:this.state.lastName,passwordHash:this.state.password})});case 3:return t=e.sent,e.abrupt("return",200===t.status);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("section",{id:"register-section",className:"inside-landing-page-section"},s.a.createElement(I.a,{elevation:D.a.THREE},s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("h1",null,"Register"),s.a.createElement(R.a,null,s.a.createElement(F.a,{name:"email",value:this.state.email,onChange:this.onInputChange,leftIcon:"envelope",id:"register-email-input",placeholder:"Email Address"})),s.a.createElement(R.a,null,s.a.createElement(F.a,{name:"firstName",value:this.state.firstName,onChange:this.onInputChange,leftIcon:"person",id:"register-firstname-input",placeholder:"First Name"})),s.a.createElement(R.a,null,s.a.createElement(F.a,{name:"lastName",value:this.state.lastName,onChange:this.onInputChange,leftIcon:"person",id:"register-lastname-input",placeholder:"Last Name"})),s.a.createElement(R.a,null,s.a.createElement(F.a,{name:"password",value:this.state.password,onChange:this.onInputChange,leftIcon:"lock",id:"register-password",placeholder:"Password",type:"password"})),s.a.createElement(S.b,{type:"submit",fill:!0},"Register"))),!0===this.state.submitSuccessful&&s.a.createElement(L.a,null,s.a.createElement(A.a,{message:"Registration successful!",intent:P.a.SUCCESS,onDismiss:this.onToastDismissed,timeout:3e3})),!1===this.state.submitSuccessful&&s.a.createElement(L.a,null,s.a.createElement(A.a,{message:"Registration failed!",intent:P.a.DANGER,onDismiss:this.onToastDismissed,timeout:3e3})))}}]),t}(n.Component),_=(a(77),function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onSubmit=function(){var e=Object(u.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.validateForm()){e.next=6;break}return e.next=4,a.submitForm();case 4:n=e.sent,a.setState(Object(v.a)({},a.state,{loginSuccessful:n}));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var n=e.cookies;return a.state={email:"",password:"",loginSuccessful:null,csrfToken:n.get("XSRF-TOKEN")},a.onInputChange=a.onInputChange.bind(Object(x.a)(Object(x.a)(a))),a.onSubmit=a.onSubmit.bind(Object(x.a)(Object(x.a)(a))),a.onToastDismissed=a.onToastDismissed.bind(Object(x.a)(Object(x.a)(a))),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"onInputChange",value:function(e){var t=e.currentTarget;["email","password"].includes(t.name)?this.setState(Object(T.a)({},t.name,t.value)):console.log("Can't assign name \"".concat(t.name,'" to form.'))}},{key:"onToastDismissed",value:function(){this.setState(Object(v.a)({},this.state,{loginSuccessful:null}))}},{key:"validateForm",value:function(){return!0}},{key:"submitForm",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new URLSearchParams).append("email",this.state.email),t.append("password",this.state.password),e.next=6,fetch("/user_api/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","X-XSRF-TOKEN":this.state.csrfToken},body:t.toString()});case 6:return(a=e.sent).text().then(function(e){console.log(e)}),console.log(a),e.abrupt("return",200===a.status);case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("section",{id:"login-section",className:"inside-landing-page-section"},s.a.createElement(I.a,{elevation:D.a.THREE},s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("h1",null,"Login"),s.a.createElement(R.a,null,s.a.createElement(F.a,{name:"email",value:this.state.email,onChange:this.onInputChange,leftIcon:"envelope",id:"login-email-input",placeholder:"Email Address"})),s.a.createElement(R.a,null,s.a.createElement(F.a,{name:"password",value:this.state.password,onChange:this.onInputChange,leftIcon:"lock",id:"login-password",placeholder:"Password",type:"password"})),s.a.createElement(S.b,{type:"submit",fill:!0},"Login"))),!0===this.state.loginSuccessful&&s.a.createElement(L.a,null,s.a.createElement(A.a,{message:"Login successful!",intent:P.a.SUCCESS,onDismiss:this.onToastDismissed,timeout:3e3})),!1===this.state.loginSuccessful&&s.a.createElement(L.a,null,s.a.createElement(A.a,{message:"Login failed!",intent:P.a.DANGER,onDismiss:this.onToastDismissed,timeout:3e3})))}}]),t}(n.Component)),G=a(87),H=a(88),J=a(90),K=function(e){function t(e){var a;Object(m.a)(this,t),a=Object(h.a)(this,Object(d.a)(t).call(this,e));var n=e.cookies;return a.state={csrfToken:n.get("XSRF-TOKEN"),isAuthenticated:!1,user:void 0},console.log(a.state.csrfToken),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.autoLogin();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"autoLogin",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t,a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.cookies.get("JSESSIONID"),console.log(t),void 0==t){e.next=11;break}return e.next=5,fetch("/user_api/session/".concat(t),{credentials:"include"});case 5:return a=e.sent,e.next=8,a.text();case 8:n=e.sent,console.log("onDidMount: ",n),""===n?this.setState({isAuthenticated:!1}):(console.log(n),this.setState({isAuthenticated:!0,user:JSON.parse(n)}));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"app"},s.a.createElement(J.a,null,s.a.createElement(G.a,null,s.a.createElement(H.a,{exact:!0,path:"/",component:N}),s.a.createElement(H.a,{path:"/register",render:function(t){return s.a.createElement("div",{className:"section-wrapper"},s.a.createElement(N,null),s.a.createElement(X,e.props))}}),s.a.createElement(H.a,{path:"/login",render:function(t){return s.a.createElement("div",{className:"section-wrapper"},s.a.createElement(N,null),s.a.createElement(_,e.props))}}))))}}]),t}(n.Component),z=Object(r.b)(K);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(79);o.a.render(s.a.createElement(r.a,null,s.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[51,1,2]]]);
//# sourceMappingURL=main.9a3c3fc7.chunk.js.map